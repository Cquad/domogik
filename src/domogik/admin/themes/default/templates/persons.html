{% extends theme("base/base.html") %}

{% block content %}
<div class="container">
    <h1>{% trans %}Persons list{% endtrans %}</h1>
    <div class="row">
      <div class="col-md-4">
        <div class="panel panel-default">
          <div class="panel-body">
            <p class="text-center">
              <a id="start" class="btn btn-success" href="/persons/0">{% trans %}Add a new person{% endtrans%}</a>
            </p>
          </div>
        </div>
      </div>
    </div>
    {% if persons|length > 0 %}
      {% set index = 0 %}
      {% for data in persons %}
        {% if index % 3 == 0 %}
          <div class="row">
        {% endif %}
          <div class="col-md-4">
            <div class="panel panel-default">
              <div class="panel-body">
                <div class="person-info">
                  <div class="pull-left photo">
                    <i class="fa fa-user fa-4x" aria-hidden="true"></i>
                  </div>
                  <ul class="list-unstyled">
                    <!--
                    <li>{% trans %}Name{% endtrans %} : <strong>{{ data.last_name }}</strong></li>
                    <li>{% trans %}First name{% endtrans %} : <strong>{{ data.first_name }}</strong></li>
                    -->
                    <li><strong>{{ data.last_name }} {{ data.first_name }}</strong></li>
                    <li>{% trans %}Birth date{% endtrans %} : {{ data.birthdate }}</li>
                  </ul>
  
                  <div>
                    <a href="/persons/{{ data.id }}" class="btn btn-default"><span class='glyphicon glyphicon-pencil' aria-hidden='true'></span> {% trans %}Edit{% endtrans %}</a>
                    <a data-toggle="confirmation" class="btn btn-default" data-placement="bottom" data-href="/persons/del/{{ data.id }}"><span class='glyphicon glyphicon-trash' aria-hidden='true'></span> {% trans %}Delete{% endtrans %}</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        {% if index % 3 == 2 %}
          </div>
        {% endif %}
        {% set index = index  + 1 %}
      {% endfor %}
      {% set index = index  - 1 %}
      {% if index % 3 != 2 %}
        </div>
      {% endif %}
      <table class="table table-striped" style="border-collapse:collapse;">
            <thead>
                    <tr>
                        <th>{% trans %}Last Name{% endtrans %}</th>
                        <th>{% trans %}First Name{% endtrans %}</th>
                        <th>{% trans %}Birthdate{% endtrans %}</th>
                        <th>&nbsp;</th>
                    </tr>
            </thead>
            <tbody>
            {% for data in persons %}
                    <tr>
                        <td>{{ data.last_name }}</td>
                        <td>{{ data.first_name }}</td>
                        <td>{{ data.birthdate }}</td>
                        <td><a href="/persons/{{ data.id }}" class="btn btn-default">{% trans %}Update{% endtrans %}</a>

                <a data-toggle="confirmation" class="btn btn-default" data-placement="bottom" data-href="/persons/del/{{ data.id }}">{% trans %}Delete{% endtrans %}</a>
            </td>
                    </tr>
            {% endfor %}
            </tbody>
        </table>
    {% else %}
    <div class="alert alert-warning">{% trans %}No persons found{% endtrans %}</div>
    {% endif %}
</div>
{% endblock %}
